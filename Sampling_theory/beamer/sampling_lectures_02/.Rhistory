knitr::opts_chunk$set(cache=TRUE)
knitr::opts_chunk$set(fig.path='figs/')
knitr::opts_chunk$set(cache.path='cache/')
knitr::opts_chunk$set(
fig.process = function(x) {
x2 = sub('-\\d+([.][a-z]+)$', '\\1', x)
if (file.rename(x, x2)) x2 else x
}
)
library(tidyverse)
#library(stevemisc)
library(survey)
data(api)
library(survey)
data(api)
library(survey)
data(api)
srs_design<-svydesign(id=~1, fpc=~fpc, data=apisrs)
svydesign()
srs_design<-svydesign(id=~1, fpc=~fpc, data=apisrs)
srs_design
View(apisrs)
svymean(~enroll, srs_design)
svytotal(~enroll, srs_design)
srs_design<-svydesign(id=~1, fpc=~fpc, data=apisrs)
srs_design
svymean(~enroll, srs_design)
svytotal(~enroll, srs_design)
View(apisrs)
apisrs$pw
nofpc<- svydesign(id=~1, weights=~pw,data=apisrs)
nofpc
svymean(~enroll, nofpc)
svytotal(~enroll, nofpc)
nofpc<- svydesign(id=~1, weights=~pw,data=apisrs)
nofpc
svymean(~enroll, nofpc)
svytotal(~enroll, nofpc)
View(apisrs)
svytotal(~svytotal, srs_design)
svytotal(~stype, srs_design)
means<- svymean(~api00+api99, srs_design)
means
svycontrast(means, c(api00=1, api99=-1))
means<- svymean(~api00+api99, srs_design)
means
svycontrast(means, c(api00=1, api99=~1))
means<- svymean(~api00+api99, srs_design)
means
svycontrast(means, c(api00=1, api99=-1))
means<- svymean(~api00+api99, srs_design)
means
svycontrast(means, c(api00=1, api99=-1))
srs_design<-update(srs_design, apidiff=api00-api99)
srs_design<-update(srs_design, apipct=apidiff/api99)
svymean(~apidiff+apipct, srs_design)
svycontrast(means, quote(api00-api99))
svycontrast(means, quote(api00-api99))
svytotal(~enroll, srs_design)
svymean(~enroll, srs_design)
nofpc<- svydesign(id=~1, weights=~pw,data=apisrs)
nofpc
svytotal(~enroll, nofpc)
svymean(~enroll, nofpc)
strat_design<-svydesign(id=~1, strata=~stype, fpc=~fpc, data=apistrat)
strat_design
svytotal(~enroll, strat_design)
svymean(~enroll, strat_design)
svytotal(~stype, strat_design)
strat_design<-svydesign(id=~1, strata=~stype, fpc=~fpc, data=apistrat)
strat_design
svytotal(~enroll, strat_design)
svymean(~enroll, strat_design)
svytotal(~stype, strat_design)
View(apistrat)
View(apistrat)
svytotal(~stype, strat_design)
boot_design<-as.svrepdesign(strat_design, type="bootstrap", replicates=100)
jk_design<-as.svrepdesign(strat_design)
boot_design
jk_design
boot_design<-as.svrepdesign(strat_design, type="bootstrap", replicates=100)
jk_design<-as.svrepdesign(strat_design)
boot_design
jk_design
svymean(~enroll,boot_design)
svymean(~enroll,jk_design)
boot_design<-as.svrepdesign(strat_design, type="bootstrap",
replicates=100)
jk_design<-as.svrepdesign(strat_design)
boot_design
jk_design
svymean(~enroll,boot_design)
svymean(~enroll,jk_design)
boot_design<-as.svrepdesign(strat_design, type="bootstrap",
replicates=100)
jk_design<-as.svrepdesign(strat_design)
boot_design
jk_design
svymean(~enroll,boot_design)
svymean(~enroll,jk_design)
boot_design<-as.svrepdesign(strat_design, type="bootstrap",
replicates=100)
jk_design<-as.svrepdesign(strat_design)
boot_design
jk_design
svymean(~enroll,boot_design)
svymean(~enroll,jk_design)
svyquantile(~bmi_p, design=chis,quantiles=c(0.25,0.5,0.75))
svyquantile(~enroll, design=strat_design,quantiles=c(0.25,0.5,0.75))
svyquantile(”api00, strat-design, c(0.25, 0.5, 0.75) ,ci=TRUE
svyquantile(”api00, strat-design, c(0.25, 0.5, 0.75) ,ci=TRUE)
svyquantile(”api00, strat-design, c(0.25, 0.5, 0.75) ,ci=TRUE)
svyquantile(api00, strat-design, c(0.25, 0.5, 0.75) ,ci=TRUE)
svyquantile(~api00, strat_design, c(0.25, 0.5, 0.75) ,ci=TRUE)
svyquantile(~api00, strat_design, c(0.25, 0.5, 0.75), ci=TRUE)
emerg_high<-subset(strat_design, emer>20)
emerg_low<-subset(strat_design, emer==0)
svymean(~api00+api99, emer_high)
emerg_high<-subset(strat_design, emer>20)
emerg_low<-subset(strat_design, emer==0)
emerg_high<-subset(strat_design, emer>20)
emerg_low<-subset(strat_design, emer==0)
svymean(~api00+api99, emerg_high)
svymean(~api00+api99, emerg_low)
svytotal(~enroll,emerg_high)
svytotal(~enroll,emer_low)
emerg_high<-subset(strat_design, emer>20)
emerg_low<-subset(strat_design, emer==0)
svymean(~api00+api99, emerg_high)
svymean(~api00+api99, emerg_low)
svytotal(~enroll,emerg_high)
svytotal(~enroll,emerg_low)
svytotal(~enroll,emerg_high)
svytotal(~enroll,emerg_low)
emerg_high<-subset(strat_design, emer>20)
emerg_low<-subset(strat_design, emer==0)
svymean(~api00+api99, emerg_high)
svymean(~api00+api99, emerg_low)
nhanes3
nhis
clus2_design<-svydesign(id=~dnum+snum, fpc=~fpcl+fpc2, data=apiclus2)
clus2_design<-svydesign(id=~dnum+snum, fpc=~fpc1+fpc2, data=apiclus2)
clus2_design<-svydesign(id=~dnum+snum, fpc=~fpc1+fpc2, data=apiclus2)
clus2_design<-svydesign(id=~dnum+snum, fpc=~fpc1+fpc2, data=apiclus2)
clus2_design
View(apiclus2)
knitr::opts_chunk$set(cache=TRUE)
knitr::opts_chunk$set(fig.path='figs/')
knitr::opts_chunk$set(cache.path='cache/')
knitr::opts_chunk$set(
fig.process = function(x) {
x2 = sub('-\\d+([.][a-z]+)$', '\\1', x)
if (file.rename(x, x2)) x2 else x
}
)
library(tidyverse)
#library(stevemisc)
clus2_design<-svydesign(id=~dnum+snum, fpc=~fpc1+fpc2, data=apiclus2)
knitr::opts_chunk$set(cache=TRUE)
knitr::opts_chunk$set(fig.path='figs/')
knitr::opts_chunk$set(cache.path='cache/')
knitr::opts_chunk$set(
fig.process = function(x) {
x2 = sub('-\\d+([.][a-z]+)$', '\\1', x)
if (file.rename(x, x2)) x2 else x
}
)
library(tidyverse)
#library(stevemisc)
library(survey)
data(api)
srs_design<-svydesign(id=~1, fpc=~fpc, data=apisrs)
srs_design
svytotal(~enroll, srs_design)
svymean(~enroll, srs_design)
nofpc<- svydesign(id=~1, weights=~pw,data=apisrs)
nofpc
svytotal(~enroll, nofpc)
svymean(~enroll, nofpc)
svytotal(~stype, srs_design)
means<- svymean(~api00+api99, srs_design)
means
svycontrast(means, c(api00=1, api99=-1))
srs_design<-update(srs_design, apidiff=api00-api99)
srs_design<-update(srs_design, apipct=apidiff/api99)
svymean(~apidiff+apipct, srs_design)
svycontrast(means, quote(api00-api99))
strat_design<-svydesign(id=~1, strata=~stype, fpc=~fpc, data=apistrat)
strat_design
svytotal(~enroll, strat_design)
svymean(~enroll, strat_design)
svytotal(~stype, strat_design)
boot_design<-as.svrepdesign(strat_design, type="bootstrap",
replicates=100)
jk_design<-as.svrepdesign(strat_design)
boot_design
jk_design
svymean(~enroll,boot_design)
svymean(~enroll,jk_design)
svyquantile(~api00, strat_design, c(0.25, 0.5, 0.75), ci=TRUE)
emerg_high<-subset(strat_design, emer>20)
emerg_low<-subset(strat_design, emer==0)
svymean(~api00+api99, emerg_high)
svymean(~api00+api99, emerg_low)
svytotal(~enroll,emerg_high)
svytotal(~enroll,emerg_low)
clus2_design<-svydesign(id=~dnum+snum, fpc=~fpc1+fpc2, data=apiclus2)
clus2_design
option(survey.lonely.psu)
options(survey.lonely.psu)
options(survey.lonely.psu = "adjust")
options(survey.lonely.psu = "adjust")
options(survey.lonely.psu = "average")
