muestra
mean(data$y)
pesos=c(200,800,400,600)/size
pesos_agr=c(rep(pesos[1],50),rep(pesos[2],50),rep(pesos[3],20),rep(pesos[4],25))
datos_agr=cbind(muestra,pesos_agr)
t_total_est=sum(datos_agr$pesos_agr*datos_agr$y)
t_total_est
y_barra_est=t_total_est/sum(datos_agr$pesos_agr)
y_barra_est
sum(datos_agr$pesos_agr)
library(Hmisc)
wtd.quantile(datos_agr$y,weights = datos_agr$pesos_agr)
pseudo_pob=c(rep(datos_agr$y,datos_agr$pesos_agr))
head(pseudo_pob)
length(pseudo_pob)
y_barra_est_mas=sum(pseudo_pob)/length(pseudo_pob)
y_barra_est
t_total_est_mas=length(pseudo_pob)*y_barra_est
t_total_est_mas
quantile(pseudo_pob,c(.25,.5,.75))
wtd.quantile(pseudo_pob)
data=read.csv("nybight.csv")
head(data)
ecdf_val=wtd.Ecdf(data$catchnum,weights=data$catchwt)
plot(ecdf_val$x,ecdf_val$ecdf, type="s")
epmf=c(ecdf_val$ecdf[1],diff(ecdf_val$ecdf))
plot(ecdf_val$x,epmf, type="h")
data=read.csv("teachers.csv")
head(data)
ecdf_val=wtd.Ecdf(data$hrwork,weights=data$size)
plot(ecdf_val$x,ecdf_val$ecdf, type="s")
epmf=c(ecdf_val$ecdf[1],diff(ecdf_val$ecdf))
plot(ecdf_val$x,epmf, type="h")
library(survey)
options(survey.lonely.psu = "adjust")
dstrat=svydesign(id=~1,strata=~school, weights=~size, data=data)
svymean(~hrwork, dstrat, deff=TRUE)
#Acá un detalle en cuanto a los datos faltantes
data=read.csv("measles.csv")
head(data)
prop_rec=data$form/length(data$form)
prop_meas=data$hadmeas/length(data$hadmeas)
data=cbind(data,prop_rec,prop_meas)
dstrat=svydesign(id=~1,strata=~school, weights=~mi, data=data)
svymean(~prop_rec, dstrat, deff=TRUE)
svymean(~prop_meas, dstrat, deff=TRUE)
#Acá un detalle en cuanto a los datos faltantes
data=read.csv("statepop.csv")
head(data)
hist(data$veterans)
pob_total=255077536
pesos=pob_total/data$popn
pesos
data=cbind(data,pesos)
options(survey.lonely.psu = "adjust")
dstrat <- svydesign(id = ~1, strata = ~state, weights = ~pesos, data = data)
svyhist(~veterans, dstrat, freq=TRUE,main="Survey weighted", col="purple")
#Jackknife Method:
library(bootstrap)
data<-law
# Jackknife SE estimation
n<-nrow(data)
corr<-function(yz,indata){cor(indata[yz,1],indata[yz,2])}
#Correlation coefficient r
sampcorr<-cor(data[1:n,1],data[1:n,2])
sampcorr
# Jackknife correlation coefficient
jack_data<-jackknife(1:n,corr,data)
jack_data
# Bias - corrected jackknife estimate
corrjack=sampcorr-jack_data$jack.bias
corrjack
#Bootstrap Method:
# Bootstrap SE Estimation
n<-nrow(data)
B<-100
rep.boot<-numeric(B)
for (i in 1:B){
idx<-sample(1:n,size = n,replace=TRUE)
d.boot<-law[idx,]
rep.boot[i]<-cor(d.boot)[1,2]
}
se<-sd(rep.boot)
se
data=read.csv("syc.csv")
#ifelse(condicion, si, no)
data$age<-ifelse(data$age <= 14, 1, 0)
data
dstrat=svydesign(id=~1,strata=~stratum, weights=~finalwt, data=data)
svymean(~age, dstrat, deff=TRUE)
svymean(~prviol, dstrat, deff=TRUE)
svyvar(~age, dstrat)
data=read.csv("ncvs2000.csv")
data
#ifelse(condicion, si, no)
data$violent<-ifelse(data$violent>= 1, 1, 0)
data
dstrat=svydesign(id=~1,strata=~pstrat, weights=~pweight, data=data)
svymean(~violent, dstrat, deff=TRUE)
svymean(~numinc, dstrat, deff=TRUE)
svymean(~form, dstrat, deff=TRUE)
svymean(~form, dstrat, deff=TRUE)
head(data)
head(data)
data=read.csv("measles.csv")
head(data)
dstrat=svydesign(id=~1,strata=~school, weights=~mi, data=data)
svymean(~form, dstrat, deff=TRUE)
svymean(~hadmeas, dstrat, deff=TRUE)
summary(data$form)
summary(hadmeas)
summary(data$hadmeas)
summary(data$hadmeas)
summary(data$hadmeas)
summary(data$form)
ifelse(data$form==0,0,1)
data$form=ifelse(data$form==0,0,1)
head(data)
summary(data$form)
data=read.csv("measles.csv")
head(data)
summary(data$form)
data$form=ifelse(data$form==0,0,1)
data=cbind(data,prop_rec,prop_meas)
dstrat=svydesign(id=~1,strata=~school, weights=~mi, data=data)
svymean(~form, dstrat, deff=TRUE)
svymean(~hadmeas, dstrat, deff=TRUE)
#Acá un detalle en cuanto a los datos faltantes
setwd("C:/Users/Eloy/Google Drive/EST/Docencia/2020/IEST 412 - Muestreo II/Ejercicios/Prueba 2")
set.seed(7589)
data<-read.csv("integerwt.csv")
head(data)
library(splitstackshape)
size<-c(50,50,20,25)
muestra<-stratified(data,"stratum", c("1"=50,"2"=50,"3"=20,"4"=25))
muestra
mean(data$y)
pesos=c(200,800,400,600)/size
pesos_agr=c(rep(pesos[1],50),rep(pesos[2],50),rep(pesos[3],20),rep(pesos[4],25))
datos_agr=cbind(muestra,pesos_agr)
t_total_est=sum(datos_agr$pesos_agr*datos_agr$y)
t_total_est
y_barra_est=t_total_est/sum(datos_agr$pesos_agr)
y_barra_est
sum(datos_agr$pesos_agr)
library(Hmisc)
wtd.quantile(datos_agr$y,weights = datos_agr$pesos_agr)
pseudo_pob=c(rep(datos_agr$y,datos_agr$pesos_agr))
head(pseudo_pob)
length(pseudo_pob)
y_barra_est_mas=sum(pseudo_pob)/length(pseudo_pob)
y_barra_est
t_total_est_mas=length(pseudo_pob)*y_barra_est
t_total_est_mas
quantile(pseudo_pob,c(.25,.5,.75))
wtd.quantile(pseudo_pob)
data=read.csv("nybight.csv")
head(data)
ecdf_val=wtd.Ecdf(data$catchnum,weights=data$catchwt)
plot(ecdf_val$x,ecdf_val$ecdf, type="s")
epmf=c(ecdf_val$ecdf[1],diff(ecdf_val$ecdf))
plot(ecdf_val$x,epmf, type="h")
data=read.csv("teachers.csv")
head(data)
ecdf_val=wtd.Ecdf(data$hrwork,weights=data$size)
plot(ecdf_val$x,ecdf_val$ecdf, type="s")
epmf=c(ecdf_val$ecdf[1],diff(ecdf_val$ecdf))
plot(ecdf_val$x,epmf, type="h")
library(survey)
options(survey.lonely.psu = "adjust")
dstrat=svydesign(id=~1,strata=~school, weights=~size, data=data)
svymean(~hrwork, dstrat, deff=TRUE)
#Acá un detalle en cuanto a los datos faltantes
data=read.csv("measles.csv")
head(data)
summary(data$form)
data$form=ifelse(data$form==0,0,1)
data=cbind(data,prop_rec,prop_meas)
data=read.csv("measles.csv")
head(data)
summary(data$form)
data$form=ifelse(data$form==0,0,1)
dstrat=svydesign(id=~1,strata=~school, weights=~mi, data=data)
svymean(~form, dstrat, deff=TRUE)
svymean(~hadmeas, dstrat, deff=TRUE)
#Acá un detalle en cuanto a los datos faltantes
setwd("C:/Users/Eloy/Google Drive/EST/Docencia/2020/IEST 412 - Muestreo II/Ejercicios/Prueba 2")
set.seed(7589)
data<-read.csv("integerwt.csv")
head(data)
library(splitstackshape)
size<-c(50,50,20,25)
muestra<-stratified(data,"stratum", c("1"=50,"2"=50,"3"=20,"4"=25))
muestra
mean(data$y)
pesos=c(200,800,400,600)/size
pesos_agr=c(rep(pesos[1],50),rep(pesos[2],50),rep(pesos[3],20),rep(pesos[4],25))
datos_agr=cbind(muestra,pesos_agr)
t_total_est=sum(datos_agr$pesos_agr*datos_agr$y)
t_total_est
y_barra_est=t_total_est/sum(datos_agr$pesos_agr)
y_barra_est
sum(datos_agr$pesos_agr)
library(Hmisc)
wtd.quantile(datos_agr$y,weights = datos_agr$pesos_agr)
pseudo_pob=c(rep(datos_agr$y,datos_agr$pesos_agr))
head(pseudo_pob)
length(pseudo_pob)
y_barra_est_mas=sum(pseudo_pob)/length(pseudo_pob)
y_barra_est
t_total_est_mas=length(pseudo_pob)*y_barra_est
t_total_est_mas
quantile(pseudo_pob,c(.25,.5,.75))
wtd.quantile(pseudo_pob)
data=read.csv("nybight.csv")
head(data)
ecdf_val=wtd.Ecdf(data$catchnum,weights=data$catchwt)
plot(ecdf_val$x,ecdf_val$ecdf, type="s")
epmf=c(ecdf_val$ecdf[1],diff(ecdf_val$ecdf))
plot(ecdf_val$x,epmf, type="h")
data=read.csv("teachers.csv")
head(data)
ecdf_val=wtd.Ecdf(data$hrwork,weights=data$size)
plot(ecdf_val$x,ecdf_val$ecdf, type="s")
epmf=c(ecdf_val$ecdf[1],diff(ecdf_val$ecdf))
plot(ecdf_val$x,epmf, type="h")
library(survey)
options(survey.lonely.psu = "adjust")
dstrat=svydesign(id=~1,strata=~school, weights=~size, data=data)
svymean(~hrwork, dstrat, deff=TRUE)
#Acá un detalle en cuanto a los datos faltantes
data=read.csv("measles.csv")
head(data)
summary(data$form)
data$form=ifelse(data$form==0,0,1)
dstrat=svydesign(id=~1,strata=~school, weights=~mi, data=data)
svymean(~form, dstrat, deff=TRUE)
svymean(~hadmeas, dstrat, deff=TRUE)
#Acá un detalle en cuanto a los datos faltantes
data=read.csv("statepop.csv")
head(data)
hist(data$veterans)
pob_total=255077536
pesos=pob_total/data$popn
pesos
data=cbind(data,pesos)
options(survey.lonely.psu = "adjust")
dstrat <- svydesign(id = ~1, strata = ~state, weights = ~pesos, data = data)
svyhist(~veterans, dstrat, freq=TRUE,main="Survey weighted", col="purple")
#Jackknife Method:
library(bootstrap)
data<-law
# Jackknife SE estimation
n<-nrow(data)
corr<-function(yz,indata){cor(indata[yz,1],indata[yz,2])}
#Correlation coefficient r
sampcorr<-cor(data[1:n,1],data[1:n,2])
sampcorr
# Jackknife correlation coefficient
jack_data<-jackknife(1:n,corr,data)
jack_data
# Bias - corrected jackknife estimate
corrjack=sampcorr-jack_data$jack.bias
corrjack
#Bootstrap Method:
# Bootstrap SE Estimation
n<-nrow(data)
B<-100
rep.boot<-numeric(B)
for (i in 1:B){
idx<-sample(1:n,size = n,replace=TRUE)
d.boot<-law[idx,]
rep.boot[i]<-cor(d.boot)[1,2]
}
se<-sd(rep.boot)
se
data=read.csv("syc.csv")
#ifelse(condicion, si, no)
data$age<-ifelse(data$age <= 14, 1, 0)
data
dstrat=svydesign(id=~1,strata=~stratum, weights=~finalwt, data=data)
svymean(~age, dstrat, deff=TRUE)
svymean(~prviol, dstrat, deff=TRUE)
svyvar(~age, dstrat)
data=read.csv("ncvs2000.csv")
data
#ifelse(condicion, si, no)
data$violent<-ifelse(data$violent>= 1, 1, 0)
data
dstrat=svydesign(id=~1,strata=~pstrat, weights=~pweight, data=data)
svymean(~violent, dstrat, deff=TRUE)
svymean(~numinc, dstrat, deff=TRUE)
setwd("C:/Users/Eloy/Google Drive/EST/Docencia/2020/IEST 412 - Muestreo II/Ejercicios/Prueba 2")
set.seed(7589)
data<-read.csv("integerwt.csv")
head(data)
library(splitstackshape)
size<-c(50,50,20,25)
muestra<-stratified(data,"stratum", c("1"=50,"2"=50,"3"=20,"4"=25))
muestra
mean(data$y)
pesos=c(200,800,400,600)/size
pesos_agr=c(rep(pesos[1],50),rep(pesos[2],50),rep(pesos[3],20),rep(pesos[4],25))
datos_agr=cbind(muestra,pesos_agr)
t_total_est=sum(datos_agr$pesos_agr*datos_agr$y)
t_total_est
y_barra_est=t_total_est/sum(datos_agr$pesos_agr)
y_barra_est
sum(datos_agr$pesos_agr)
library(Hmisc)
wtd.quantile(datos_agr$y,weights = datos_agr$pesos_agr)
pseudo_pob=c(rep(datos_agr$y,datos_agr$pesos_agr))
head(pseudo_pob)
length(pseudo_pob)
y_barra_est_mas=sum(pseudo_pob)/length(pseudo_pob)
y_barra_est
t_total_est_mas=length(pseudo_pob)*y_barra_est
t_total_est_mas
quantile(pseudo_pob,c(.25,.5,.75))
wtd.quantile(pseudo_pob)
data=read.csv("nybight.csv")
head(data)
ecdf_val=wtd.Ecdf(data$catchnum,weights=data$catchwt)
plot(ecdf_val$x,ecdf_val$ecdf, type="s")
epmf=c(ecdf_val$ecdf[1],diff(ecdf_val$ecdf))
plot(ecdf_val$x,epmf, type="h")
data=read.csv("teachers.csv")
head(data)
ecdf_val=wtd.Ecdf(data$hrwork,weights=data$size)
plot(ecdf_val$x,ecdf_val$ecdf, type="s")
epmf=c(ecdf_val$ecdf[1],diff(ecdf_val$ecdf))
plot(ecdf_val$x,epmf, type="h")
library(survey)
options(survey.lonely.psu = "adjust")
dstrat=svydesign(id=~1,strata=~school, weights=~size, data=data)
svymean(~hrwork, dstrat, deff=TRUE)
#Acá un detalle en cuanto a los datos faltantes
data=read.csv("measles.csv")
head(data)
summary(data$form)
data$form=ifelse(data$form==0,0,1)
dstrat=svydesign(id=~1,strata=~school, weights=~mi, data=data)
svymean(~form, dstrat, deff=TRUE)
svymean(~hadmeas, dstrat, deff=TRUE)
#Acá un detalle en cuanto a los datos faltantes
data=read.csv("statepop.csv")
head(data)
hist(data$veterans)
pob_total=255077536
pesos=pob_total/data$popn
pesos
data=cbind(data,pesos)
options(survey.lonely.psu = "adjust")
dstrat <- svydesign(id = ~1, strata = ~state, weights = ~pesos, data = data)
svyhist(~veterans, dstrat, freq=TRUE,main="Survey weighted", col="purple")
#Jackknife Method:
library(bootstrap)
data<-law
# Jackknife SE estimation
n<-nrow(data)
corr<-function(yz,indata){cor(indata[yz,1],indata[yz,2])}
#Correlation coefficient r
sampcorr<-cor(data[1:n,1],data[1:n,2])
sampcorr
# Jackknife correlation coefficient
jack_data<-jackknife(1:n,corr,data)
jack_data
# Bias - corrected jackknife estimate
corrjack=sampcorr-jack_data$jack.bias
corrjack
#Bootstrap Method:
# Bootstrap SE Estimation
n<-nrow(data)
B<-100
rep.boot<-numeric(B)
for (i in 1:B){
idx<-sample(1:n,size = n,replace=TRUE)
d.boot<-law[idx,]
rep.boot[i]<-cor(d.boot)[1,2]
}
se<-sd(rep.boot)
se
data=read.csv("syc.csv")
#ifelse(condicion, si, no)
data$age<-ifelse(data$age <= 14, 1, 0)
data
dstrat=svydesign(id=~1,strata=~stratum, weights=~finalwt, data=data)
svymean(~age, dstrat, deff=TRUE)
svymean(~prviol, dstrat, deff=TRUE)
svyvar(~age, dstrat)
data=read.csv("ncvs2000.csv")
data
#ifelse(condicion, si, no)
data$violent<-ifelse(data$violent>= 1, 1, 0)
data
dstrat=svydesign(id=~1,strata=~pstrat, weights=~pweight, data=data)
svymean(~violent, dstrat, deff=TRUE)
svymean(~numinc, dstrat, deff=TRUE)
setwd("C:/Users/Eloy/Google Drive/EST/Docencia/2020/IEST 412 - Muestreo II/Ejercicios/Prueba 2")
set.seed(7589)
data<-read.csv("integerwt.csv")
head(data)
library(splitstackshape)
size<-c(50,50,20,25)
muestra<-stratified(data,"stratum", c("1"=50,"2"=50,"3"=20,"4"=25))
muestra
mean(data$y)
pesos=c(200,800,400,600)/size
pesos_agr=c(rep(pesos[1],50),rep(pesos[2],50),rep(pesos[3],20),rep(pesos[4],25))
datos_agr=cbind(muestra,pesos_agr)
t_total_est=sum(datos_agr$pesos_agr*datos_agr$y)
t_total_est
y_barra_est=t_total_est/sum(datos_agr$pesos_agr)
y_barra_est
sum(datos_agr$pesos_agr)
library(Hmisc)
wtd.quantile(datos_agr$y,weights = datos_agr$pesos_agr)
pseudo_pob=c(rep(datos_agr$y,datos_agr$pesos_agr))
head(pseudo_pob)
length(pseudo_pob)
y_barra_est_mas=sum(pseudo_pob)/length(pseudo_pob)
y_barra_est
t_total_est_mas=length(pseudo_pob)*y_barra_est
t_total_est_mas
quantile(pseudo_pob,c(.25,.5,.75))
wtd.quantile(pseudo_pob)
data=read.csv("nybight.csv")
head(data)
ecdf_val=wtd.Ecdf(data$catchnum,weights=data$catchwt)
plot(ecdf_val$x,ecdf_val$ecdf, type="s")
epmf=c(ecdf_val$ecdf[1],diff(ecdf_val$ecdf))
plot(ecdf_val$x,epmf, type="h")
data=read.csv("teachers.csv")
head(data)
ecdf_val=wtd.Ecdf(data$hrwork,weights=data$size)
plot(ecdf_val$x,ecdf_val$ecdf, type="s")
epmf=c(ecdf_val$ecdf[1],diff(ecdf_val$ecdf))
plot(ecdf_val$x,epmf, type="h")
library(survey)
options(survey.lonely.psu = "adjust")
dstrat=svydesign(id=~1,strata=~school, weights=~size, data=data)
svymean(~hrwork, dstrat, deff=TRUE)
#Acá un detalle en cuanto a los datos faltantes
data=read.csv("measles.csv")
head(data)
summary(data$form)
data$form=ifelse(data$form==0,0,1)
dstrat=svydesign(id=~1,strata=~school, weights=~mi, data=data)
svymean(~form, dstrat, deff=TRUE)
svymean(~hadmeas, dstrat, deff=TRUE)
#Acá un detalle en cuanto a los datos faltantes
data=read.csv("statepop.csv")
head(data)
hist(data$veterans)
pob_total=255077536
pesos=pob_total/data$popn
pesos
data=cbind(data,pesos)
options(survey.lonely.psu = "adjust")
dstrat <- svydesign(id = ~1, strata = ~state, weights = ~pesos, data = data)
svyhist(~veterans, dstrat, freq=TRUE,main="Survey weighted", col="purple")
#Jackknife Method:
library(bootstrap)
data<-law
# Jackknife SE estimation
n<-nrow(data)
corr<-function(yz,indata){cor(indata[yz,1],indata[yz,2])}
#Correlation coefficient r
sampcorr<-cor(data[1:n,1],data[1:n,2])
sampcorr
# Jackknife correlation coefficient
jack_data<-jackknife(1:n,corr,data)
jack_data
# Bias - corrected jackknife estimate
corrjack=sampcorr-jack_data$jack.bias
corrjack
#Bootstrap Method:
# Bootstrap SE Estimation
n<-nrow(data)
B<-100
rep.boot<-numeric(B)
for (i in 1:B){
idx<-sample(1:n,size = n,replace=TRUE)
d.boot<-law[idx,]
rep.boot[i]<-cor(d.boot)[1,2]
}
se<-sd(rep.boot)
se
data=read.csv("syc.csv")
#ifelse(condicion, si, no)
data$age<-ifelse(data$age <= 14, 1, 0)
data
dstrat=svydesign(id=~1,strata=~stratum, weights=~finalwt, data=data)
svymean(~age, dstrat, deff=TRUE)
svymean(~prviol, dstrat, deff=TRUE)
svyvar(~age, dstrat)
data=read.csv("ncvs2000.csv")
head(data)
#ifelse(condicion, si, no)
data$violent<-ifelse(data$violent>= 1, 1, 0)
head(data)
dstrat=svydesign(id=~1,strata=~pstrat, weights=~pweight, data=data)
svymean(~violent, dstrat, deff=TRUE)
svymean(~numinc, dstrat, deff=TRUE)
data=read.csv("syc.csv")
#ifelse(condicion, si, no)
data$age<-ifelse(data$age <= 14, 1, 0)
head(data)
dstrat=svydesign(id=~1,strata=~stratum, weights=~finalwt, data=data)
svymean(~age, dstrat, deff=TRUE)
svymean(~prviol, dstrat, deff=TRUE)
svyvar(~age, dstrat)
